{"ast":null,"code":"var _jsxFileName = \"E:\\\\Visual Studio Code\\\\WhaleCorpProject\\\\frontend\\\\src\\\\components\\\\HomePage.jsx\",\n  _s = $RefreshSig$();\nimport React from \"react\";\nimport { Link } from \"react-router-dom\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst StreamingsLazy = /*#__PURE__*/React.lazy(_c = () => import(\"./Streamings\"));\n\n// ---- Helpers: orden y fechas ----\n_c2 = StreamingsLazy;\nconst SPECIAL_TAIL = new Set([\"bard\", \"paladin\", \"artist\", \"valkyrie\"]);\nconst isTailClass = clsName => typeof clsName === \"string\" && SPECIAL_TAIL.has(clsName.trim().toLowerCase());\nconst sortTeam = (arr = []) => {\n  const withIndex = arr.map((c, i) => ({\n    c,\n    i\n  }));\n  withIndex.sort((a, b) => {\n    var _a$c, _a$c$class, _b$c, _b$c$class;\n    const aIsTail = isTailClass((_a$c = a.c) === null || _a$c === void 0 ? void 0 : (_a$c$class = _a$c.class) === null || _a$c$class === void 0 ? void 0 : _a$c$class.name);\n    const bIsTail = isTailClass((_b$c = b.c) === null || _b$c === void 0 ? void 0 : (_b$c$class = _b$c.class) === null || _b$c$class === void 0 ? void 0 : _b$c$class.name);\n    if (aIsTail !== bIsTail) return aIsTail ? 1 : -1;\n    return a.i - b.i;\n  });\n  return withIndex.map(x => x.c);\n};\nconst mmddRe = /^(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\nconst ymdRe = /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\nconst formatDayMonth = value => {\n  if (!value) return \"Fecha no asignada\";\n  const s = String(value).trim();\n  if (mmddRe.test(s)) {\n    const [m, d] = s.split(\"-\");\n    return `${m.padStart(2, \"0\")}-${d.padStart(2, \"0\")}`;\n  }\n  const ymd = s.match(ymdRe);\n  if (ymd) {\n    const [,, m, d] = ymd;\n    return `${m}-${d}`;\n  }\n  const d = new Date(s);\n  if (!isNaN(d)) {\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(d.getDate()).padStart(2, \"0\");\n    return `${mm}-${dd}`;\n  }\n  return s;\n};\nconst dateKeyFromDate = dateStr => {\n  if (!dateStr) return Number.POSITIVE_INFINITY;\n  const s = String(dateStr).trim();\n  if (mmddRe.test(s)) {\n    const [m, d] = s.split(\"-\");\n    return parseInt(`${m}${d}`, 10);\n  }\n  const ymd = s.match(ymdRe);\n  if (ymd) {\n    const [,, m, d] = ymd;\n    return parseInt(`${m}${d}`, 10);\n  }\n  const d = new Date(s);\n  if (!isNaN(d)) {\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\n    const dd = String(d.getDate()).padStart(2, \"0\");\n    return parseInt(`${mm}${dd}`, 10);\n  }\n  return Number.POSITIVE_INFINITY;\n};\nconst minutesFromTime = timeStr => {\n  if (!timeStr) return Number.POSITIVE_INFINITY;\n  const s = String(timeStr).trim();\n  let m = s.match(/^([01]?\\d|2[0-3]):([0-5]\\d)$/);\n  if (m) return parseInt(m[1], 10) * 60 + parseInt(m[2], 10);\n  m = s.match(/^(\\d{3,4})$/);\n  if (m) {\n    const raw = m[1];\n    const hh = parseInt(raw.length === 3 ? raw.slice(0, 1) : raw.slice(0, 2), 10);\n    const mm = parseInt(raw.length === 3 ? raw.slice(1) : raw.slice(2), 10);\n    if (hh >= 0 && hh <= 23 && mm >= 0 && mm <= 59) return hh * 60 + mm;\n  }\n  m = s.match(/^([01]?\\d|2[0-3])$/);\n  if (m) return parseInt(m[1], 10) * 60;\n  return Number.POSITIVE_INFINITY;\n};\nconst dateFromCard = (dateStr, timeStr) => {\n  if (!dateStr) return null;\n  const now = new Date();\n  let y = now.getFullYear(),\n    m,\n    d;\n  if (mmddRe.test(dateStr)) {\n    const [mm, dd] = dateStr.split(\"-\").map(x => parseInt(x, 10));\n    m = mm;\n    d = dd;\n  } else {\n    const ymd = dateStr.match(ymdRe);\n    if (ymd) {\n      y = parseInt(ymd[1], 10);\n      m = parseInt(ymd[2], 10);\n      d = parseInt(ymd[3], 10);\n    } else {\n      const free = new Date(dateStr);\n      if (isNaN(free)) return null;\n      y = free.getFullYear();\n      m = free.getMonth() + 1;\n      d = free.getDate();\n    }\n  }\n  let hh = 0,\n    mm = 0;\n  if (typeof timeStr === \"string\" && timeStr.trim()) {\n    const s = timeStr.trim();\n    let m1 = s.match(/^([01]?\\d|2[0-3]):([0-5]\\d)$/);\n    if (m1) {\n      hh = parseInt(m1[1], 10);\n      mm = parseInt(m1[2], 10);\n    } else {\n      m1 = s.match(/^(\\d{3,4})$/);\n      if (m1) {\n        const raw = m1[1];\n        hh = parseInt(raw.length === 3 ? raw.slice(0, 1) : raw.slice(0, 2), 10);\n        mm = parseInt(raw.length === 3 ? raw.slice(1) : raw.slice(2), 10);\n      } else {\n        m1 = s.match(/^([01]?\\d|2[0-3])$/);\n        if (m1) hh = parseInt(m1[1], 10);\n      }\n    }\n  }\n  const dt = new Date(y, (m || 1) - 1, d || 1, hh, mm, 0, 0);\n  return isNaN(dt) ? null : dt;\n};\nconst getCardStatus = (card, nowTs) => {\n  const start = dateFromCard(card === null || card === void 0 ? void 0 : card.date, card === null || card === void 0 ? void 0 : card.time);\n  if (!start) return \"upcoming\";\n  const startTs = start.getTime();\n  const endTs = startTs + 60 * 60 * 1000;\n  if (nowTs >= endTs) return \"expired\";\n  if (nowTs >= startTs) return \"live\";\n  return \"upcoming\";\n};\n\n// ðŸš¨ Probe SIEMPRE montado (off-screen): detecta si hay al menos 1 LIVE\nfunction StreamsProbe({\n  onHasLiveChange\n}) {\n  return /*#__PURE__*/_jsxDEV(React.Suspense, {\n    fallback: null,\n    children: /*#__PURE__*/_jsxDEV(StreamingsLazy, {\n      pollIntervalMs: 60000,\n      cardWidth: 220,\n      probeEndpoint: \"http://localhost:3001/api/stream/live-status\",\n      onLiveCountChange: count => onHasLiveChange === null || onHasLiveChange === void 0 ? void 0 : onHasLiveChange(count > 0)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n}\n_c3 = StreamsProbe;\nconst CharItem = /*#__PURE__*/React.memo(_c4 = function CharItem({\n  char\n}) {\n  var _char$class, _char$class2;\n  if (!char) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: \"10px\",\n      borderRadius: \"10px\",\n      backgroundColor: \"#f8fafc\",\n      border: \"1px solid #e2e8f0\",\n      display: \"flex\",\n      flexDirection: \"column\",\n      alignItems: \"center\",\n      gap: 6,\n      textAlign: \"center\",\n      contentVisibility: \"auto\",\n      containIntrinsicSize: \"60px\"\n    },\n    title: char.name,\n    children: [(_char$class = char.class) !== null && _char$class !== void 0 && _char$class.image ? /*#__PURE__*/_jsxDEV(\"img\", {\n      src: char.class.image,\n      alt: ((_char$class2 = char.class) === null || _char$class2 === void 0 ? void 0 : _char$class2.name) || \"Clase\",\n      width: 32,\n      height: 32,\n      style: {\n        width: 32,\n        height: 32,\n        borderRadius: 8,\n        objectFit: \"cover\"\n      },\n      loading: \"lazy\",\n      decoding: \"async\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 170,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      \"aria-hidden\": true,\n      style: {\n        width: 32,\n        height: 32,\n        borderRadius: 8,\n        background: \"#e5e7eb\",\n        display: \"grid\",\n        placeItems: \"center\",\n        fontSize: 12,\n        color: \"#6b7280\"\n      },\n      children: \"?\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 180,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        fontWeight: 700,\n        fontSize: 13,\n        color: \"#0f172a\",\n        whiteSpace: \"nowrap\",\n        overflow: \"hidden\",\n        textOverflow: \"ellipsis\",\n        width: \"100%\"\n      },\n      children: char.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 197,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 153,\n    columnNumber: 5\n  }, this);\n});\n\n// ===================== AQUÃ el auto-refresh ======================\n_c5 = CharItem;\nexport default function HomePage({\n  cards = [],\n  loading,\n  error\n}) {\n  _s();\n  const API_BASE = \"http://localhost:3001\";\n  const [nowTs, setNowTs] = React.useState(() => Date.now());\n  const [hasLive, setHasLive] = React.useState(false);\n\n  // Estado local para datos auto-actualizables\n  const [dataCards, setDataCards] = React.useState(cards);\n  const [isLoading, setIsLoading] = React.useState(!!loading);\n  const [errMsg, setErrMsg] = React.useState(error || \"\");\n\n  // Si cambian las props externas, sincroniza una vez\n  React.useEffect(() => {\n    if (Array.isArray(cards) && cards.length) setDataCards(cards);\n    if (typeof loading === \"boolean\") setIsLoading(loading);\n    if (error) setErrMsg(error);\n  }, [cards, loading, error]);\n\n  // 1) â€œrelojâ€ local para estados live/expired\n  React.useEffect(() => {\n    const id = setInterval(() => setNowTs(Date.now()), 30000);\n    return () => clearInterval(id);\n  }, []);\n\n  // 2) Polling de datos cada 30s SIN refrescar la pÃ¡gina\n  React.useEffect(() => {\n    let aborter = new AbortController();\n    const load = async (silent = false) => {\n      try {\n        if (!silent) setIsLoading(true);\n        const res = await fetch(`${API_BASE}/api/data`, {\n          signal: aborter.signal\n        });\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\n        const json = await res.json();\n        // server nuevo devuelve { cards } solamente\n        setDataCards(Array.isArray(json.cards) ? json.cards : []);\n        setErrMsg(\"\");\n      } catch (e) {\n        if (e.name !== \"AbortError\") setErrMsg(e.message || \"Error loading data\");\n      } finally {\n        setIsLoading(false);\n      }\n    };\n\n    // primera carga inmediata\n    load(false);\n\n    // intervalo 30s (carga silenciosa)\n    const id = setInterval(() => load(true), 30000);\n\n    // pausar si la pestaÃ±a estÃ¡ oculta (opcional)\n    const onVis = () => {\n      if (document.visibilityState === \"visible\") {\n        // refresco rÃ¡pido al volver\n        load(true);\n      }\n    };\n    document.addEventListener(\"visibilitychange\", onVis);\n\n    // cleanup\n    return () => {\n      clearInterval(id);\n      document.removeEventListener(\"visibilitychange\", onVis);\n      aborter.abort();\n      aborter = null;\n    };\n  }, [API_BASE]);\n\n  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\n\n  const sortedCards = React.useMemo(() => {\n    return [...dataCards].sort((a, b) => {\n      const da = dateKeyFromDate(a === null || a === void 0 ? void 0 : a.date);\n      const db = dateKeyFromDate(b === null || b === void 0 ? void 0 : b.date);\n      if (da !== db) return da - db;\n      const ta = minutesFromTime(a === null || a === void 0 ? void 0 : a.time);\n      const tb = minutesFromTime(b === null || b === void 0 ? void 0 : b.time);\n      if (ta !== tb) return ta - tb;\n      const at = ((a === null || a === void 0 ? void 0 : a.title) || \"\").toLowerCase();\n      const bt = ((b === null || b === void 0 ? void 0 : b.title) || \"\").toLowerCase();\n      if (at < bt) return -1;\n      if (at > bt) return 1;\n      return 0;\n    });\n  }, [dataCards]);\n  const visibleCards = React.useMemo(() => sortedCards.filter(c => getCardStatus(c, nowTs) !== \"expired\"), [sortedCards, nowTs]);\n\n  // Render\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      maxWidth: \"1480px\",\n      margin: \"20px auto\",\n      padding: \"20px\",\n      fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\n      color: \"#34495e\"\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"style\", {\n      children: `\n        @keyframes whaleGlowPulse {\n          0% { box-shadow: 0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.45); }\n          50% { box-shadow: 0 0 0 6px rgba(30,136,229,0.12), 0 0 36px rgba(30,136,229,0.65); }\n          100% { box-shadow: 0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.45); }\n        }\n        .whale-glow { animation: whaleGlowPulse 1.6s ease-in-out infinite; border-radius: 14px; }\n\n        .wc-sections {\n          display: grid;\n          grid-template-columns: minmax(0, 1fr) 360px;\n          gap: 24px;\n          align-items: start;\n        }\n        @media (max-width: 1100px) {\n          .wc-sections { grid-template-columns: 1fr; }\n        }\n        .wc-left { content-visibility: auto; contain-intrinsic-size: 600px; }\n        .wc-right { content-visibility: auto; contain-intrinsic-size: 400px; }\n      `\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 316,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n      \"aria-labelledby\": \"welcome-title\",\n      style: {\n        textAlign: \"center\",\n        marginBottom: \"28px\",\n        padding: \"20px\",\n        backgroundColor: \"transparent\",\n        borderRadius: \"10px\"\n      },\n      children: /*#__PURE__*/_jsxDEV(\"h1\", {\n        id: \"welcome-title\",\n        style: {\n          color: \"#5A2D82\",\n          fontWeight: 700,\n          margin: 0\n        },\n        children: \"Whalecome to WhaleCorp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 348,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 338,\n      columnNumber: 7\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        textAlign: \"center\",\n        margin: \"50px 0\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 356,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        style: {\n          color: \"#95a5a6\",\n          fontSize: 16\n        },\n        children: \"Loading Characters...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 357,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 355,\n      columnNumber: 9\n    }, this) : errMsg ? /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        textAlign: \"center\",\n        margin: \"50px 0\",\n        color: \"#e74c3c\"\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: [\"Error loading data: \", errMsg]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 361,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => window.location.reload(),\n        style: {\n          padding: \"10px 20px\",\n          background: \"#1e88e5\",\n          color: \"white\",\n          border: \"none\",\n          borderRadius: 6,\n          cursor: \"pointer\",\n          fontWeight: 600,\n          fontSize: 16,\n          marginTop: 15,\n          boxShadow: \"0 2px 6px rgba(30,136,229,0.4)\"\n        },\n        onMouseOver: e => e.currentTarget.style.backgroundColor = \"#1565c0\",\n        onMouseOut: e => e.currentTarget.style.backgroundColor = \"#1e88e5\",\n        children: \"Retry\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 362,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 360,\n      columnNumber: 9\n    }, this) : visibleCards.length === 0 ? /*#__PURE__*/_jsxDEV(\"section\", {\n      style: {\n        textAlign: \"center\",\n        margin: \"50px 0\",\n        color: \"#7f8c8d\",\n        fontSize: 18\n      },\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"No cards available\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/login\",\n        style: {\n          display: \"inline-block\",\n          marginTop: 20,\n          padding: \"10px 25px\",\n          background: \"#1e88e5\",\n          color: \"white\",\n          textDecoration: \"none\",\n          borderRadius: 8,\n          fontWeight: 600,\n          boxShadow: \"0 2px 6px rgba(30,136,229,0.4)\"\n        },\n        onMouseOver: e => e.currentTarget.style.backgroundColor = \"#1565c0\",\n        onMouseOut: e => e.currentTarget.style.backgroundColor = \"#1e88e5\",\n        children: \"Log in as Admin\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 385,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 383,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"section\", {\n      className: \"wc-sections\",\n      \"aria-label\": \"contenido principal\",\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        \"aria-labelledby\": \"raids-title\",\n        className: \"wc-left\",\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          id: \"raids-title\",\n          style: {\n            textAlign: \"center\",\n            marginBottom: \"24px\",\n            color: \"#7A5DC7\",\n            fontWeight: 700,\n            letterSpacing: \"1px\"\n          },\n          children: /*#__PURE__*/_jsxDEV(\"b\", {\n            children: \"Pending Raids\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 418,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 408,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            display: \"grid\",\n            gridTemplateColumns: \"repeat(3, 1fr)\",\n            gap: \"24px\"\n          },\n          children: visibleCards.map((card, index) => {\n            const status = getCardStatus(card, nowTs);\n            const isLive = status === \"live\";\n            const team1Raw = Array.isArray(card.team1) ? card.team1 : Array.isArray(card.characters) ? card.characters.slice(0, 4) : [];\n            const team2Raw = Array.isArray(card.team2) ? card.team2 : Array.isArray(card.characters) ? card.characters.slice(4, 8) : [];\n            const team1 = sortTeam(team1Raw).slice(0, 4);\n            const team2 = sortTeam(team2Raw).slice(0, 4);\n            const hasAny = team1.length + team2.length > 0;\n            return /*#__PURE__*/_jsxDEV(\"div\", {\n              className: isLive ? \"whale-glow\" : undefined,\n              style: {\n                borderRadius: 14,\n                overflow: \"hidden\",\n                boxShadow: isLive ? \"0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.55)\" : \"0 10px 20px rgba(0,0,0,0.08)\",\n                backgroundColor: \"#fff\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                transition: \"transform 0.25s ease, box-shadow 0.25s ease\"\n              },\n              onMouseEnter: e => {\n                if (!isLive) {\n                  e.currentTarget.style.transform = \"translateY(-6px)\";\n                  e.currentTarget.style.boxShadow = \"0 20px 40px rgba(0,0,0,0.12)\";\n                }\n              },\n              onMouseLeave: e => {\n                if (!isLive) {\n                  e.currentTarget.style.transform = \"translateY(0)\";\n                  e.currentTarget.style.boxShadow = \"0 10px 20px rgba(0,0,0,0.08)\";\n                }\n              },\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: \"18px 22px\",\n                  backgroundColor: \"#e3f2fd\",\n                  borderBottom: \"1px solid #bbdefb\",\n                  userSelect: \"none\"\n                },\n                children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n                  style: {\n                    margin: 0,\n                    color: \"#7A5DC7\",\n                    fontWeight: 700,\n                    fontSize: \"1.3rem\",\n                    lineHeight: 1.15,\n                    textOverflow: \"ellipsis\",\n                    whiteSpace: \"nowrap\",\n                    overflow: \"hidden\"\n                  },\n                  title: card.title,\n                  children: card.title\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 486,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                  style: {\n                    display: \"flex\",\n                    justifyContent: \"space-between\",\n                    fontSize: 14,\n                    color: \"#607d8b\",\n                    marginTop: 6,\n                    fontWeight: 600\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(\"span\", {\n                    children: card.date ? formatDayMonth(card.date) : \"Fecha no asignada\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 511,\n                    columnNumber: 25\n                  }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                    children: card.time || \"Hora no asignada\"\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 514,\n                    columnNumber: 25\n                  }, this)]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 501,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 478,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  padding: \"18px 22px\",\n                  display: \"grid\",\n                  gridTemplateColumns: \"1fr 1fr\",\n                  gap: 16\n                },\n                children: !hasAny ? /*#__PURE__*/_jsxDEV(\"p\", {\n                  style: {\n                    color: \"#7A5DC7\",\n                    textAlign: \"center\",\n                    padding: \"30px 0\",\n                    gridColumn: \"1 / -1\",\n                    fontWeight: 500,\n                    fontStyle: \"italic\",\n                    margin: 0\n                  },\n                  children: \"Card pending assignment\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 528,\n                  columnNumber: 25\n                }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                  children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                        marginBottom: 8\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        style: {\n                          color: \"#0d47a1\"\n                        },\n                        children: \"Party 1\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 552,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: 12,\n                          color: \"#64748b\"\n                        },\n                        children: [team1.length, \"/4\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 553,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 544,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: \"grid\",\n                        gridTemplateRows: \"repeat(4, minmax(0, auto))\",\n                        gap: 10\n                      },\n                      children: team1.map((char, i) => /*#__PURE__*/_jsxDEV(CharItem, {\n                        char: char\n                      }, `t1-${i}-${(char === null || char === void 0 ? void 0 : char.name) || i}`, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 565,\n                        columnNumber: 33\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 557,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 543,\n                    columnNumber: 27\n                  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: \"flex\",\n                        justifyContent: \"space-between\",\n                        alignItems: \"center\",\n                        marginBottom: 8\n                      },\n                      children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n                        style: {\n                          color: \"#0d47a1\"\n                        },\n                        children: \"Party 2\"\n                      }, void 0, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 579,\n                        columnNumber: 31\n                      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                        style: {\n                          fontSize: 12,\n                          color: \"#64748b\"\n                        },\n                        children: [team2.length, \"/4\"]\n                      }, void 0, true, {\n                        fileName: _jsxFileName,\n                        lineNumber: 580,\n                        columnNumber: 31\n                      }, this)]\n                    }, void 0, true, {\n                      fileName: _jsxFileName,\n                      lineNumber: 571,\n                      columnNumber: 29\n                    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                      style: {\n                        display: \"grid\",\n                        gridTemplateRows: \"repeat(4, minmax(0, auto))\",\n                        gap: 10\n                      },\n                      children: team2.map((char, i) => /*#__PURE__*/_jsxDEV(CharItem, {\n                        char: char\n                      }, `t2-${i}-${(char === null || char === void 0 ? void 0 : char.name) || i}`, false, {\n                        fileName: _jsxFileName,\n                        lineNumber: 592,\n                        columnNumber: 33\n                      }, this))\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 584,\n                      columnNumber: 29\n                    }, this)]\n                  }, void 0, true, {\n                    fileName: _jsxFileName,\n                    lineNumber: 570,\n                    columnNumber: 27\n                  }, this)]\n                }, void 0, true)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 519,\n                columnNumber: 21\n              }, this)]\n            }, index, true, {\n              fileName: _jsxFileName,\n              lineNumber: 448,\n              columnNumber: 19\n            }, this);\n          })\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 421,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 407,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"section\", {\n        \"aria-labelledby\": \"streams-title\",\n        className: \"wc-right\",\n        style: {\n          justifySelf: \"end\"\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n          id: \"streams-title\",\n          style: {\n            color: \"#7A5DC7\",\n            fontWeight: 700,\n            letterSpacing: \"0.5px\",\n            margin: \"0 0 12px\",\n            textAlign: \"right\"\n          },\n          children: \"Live Streamings\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 607,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            position: \"absolute\",\n            left: -99999,\n            width: 1,\n            height: 1,\n            overflow: \"hidden\"\n          },\n          children: /*#__PURE__*/_jsxDEV(StreamsProbe, {\n            onHasLiveChange: setHasLive\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 622,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 621,\n          columnNumber: 13\n        }, this), hasLive && /*#__PURE__*/_jsxDEV(\"div\", {\n          style: {\n            borderRadius: 10,\n            padding: 12,\n            background: \"#transparent\",\n            width: 360\n          },\n          children: /*#__PURE__*/_jsxDEV(React.Suspense, {\n            fallback: null,\n            children: /*#__PURE__*/_jsxDEV(StreamingsLazy, {\n              pollIntervalMs: 60000,\n              cardWidth: 220,\n              probeEndpoint: \"http://localhost:3001/api/stream/live-status\",\n              onLiveCountChange: count => setHasLive(count > 0)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 635,\n              columnNumber: 19\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 634,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 626,\n          columnNumber: 15\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 606,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 405,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 307,\n    columnNumber: 5\n  }, this);\n}\n_s(HomePage, \"/5fgxAEK7W1xCIBLZpIAXQX1bFE=\");\n_c6 = HomePage;\nvar _c, _c2, _c3, _c4, _c5, _c6;\n$RefreshReg$(_c, \"StreamingsLazy$React.lazy\");\n$RefreshReg$(_c2, \"StreamingsLazy\");\n$RefreshReg$(_c3, \"StreamsProbe\");\n$RefreshReg$(_c4, \"CharItem$React.memo\");\n$RefreshReg$(_c5, \"CharItem\");\n$RefreshReg$(_c6, \"HomePage\");","map":{"version":3,"names":["React","Link","jsxDEV","_jsxDEV","Fragment","_Fragment","StreamingsLazy","lazy","_c","_c2","SPECIAL_TAIL","Set","isTailClass","clsName","has","trim","toLowerCase","sortTeam","arr","withIndex","map","c","i","sort","a","b","_a$c","_a$c$class","_b$c","_b$c$class","aIsTail","class","name","bIsTail","x","mmddRe","ymdRe","formatDayMonth","value","s","String","test","m","d","split","padStart","ymd","match","Date","isNaN","mm","getMonth","dd","getDate","dateKeyFromDate","dateStr","Number","POSITIVE_INFINITY","parseInt","minutesFromTime","timeStr","raw","hh","length","slice","dateFromCard","now","y","getFullYear","free","m1","dt","getCardStatus","card","nowTs","start","date","time","startTs","getTime","endTs","StreamsProbe","onHasLiveChange","Suspense","fallback","children","pollIntervalMs","cardWidth","probeEndpoint","onLiveCountChange","count","fileName","_jsxFileName","lineNumber","columnNumber","_c3","CharItem","memo","_c4","char","_char$class","_char$class2","style","padding","borderRadius","backgroundColor","border","display","flexDirection","alignItems","gap","textAlign","contentVisibility","containIntrinsicSize","title","image","src","alt","width","height","objectFit","loading","decoding","background","placeItems","fontSize","color","fontWeight","whiteSpace","overflow","textOverflow","_c5","HomePage","cards","error","_s","API_BASE","setNowTs","useState","hasLive","setHasLive","dataCards","setDataCards","isLoading","setIsLoading","errMsg","setErrMsg","useEffect","Array","isArray","id","setInterval","clearInterval","aborter","AbortController","load","silent","res","fetch","signal","ok","Error","status","json","e","message","onVis","document","visibilityState","addEventListener","removeEventListener","abort","sortedCards","useMemo","da","db","ta","tb","at","bt","visibleCards","filter","maxWidth","margin","fontFamily","marginBottom","className","onClick","window","location","reload","cursor","marginTop","boxShadow","onMouseOver","currentTarget","onMouseOut","to","textDecoration","letterSpacing","gridTemplateColumns","index","isLive","team1Raw","team1","characters","team2Raw","team2","hasAny","undefined","transition","onMouseEnter","transform","onMouseLeave","borderBottom","userSelect","lineHeight","justifyContent","gridColumn","fontStyle","gridTemplateRows","justifySelf","position","left","_c6","$RefreshReg$"],"sources":["E:/Visual Studio Code/WhaleCorpProject/frontend/src/components/HomePage.jsx"],"sourcesContent":["import React from \"react\";\r\nimport { Link } from \"react-router-dom\";\r\n\r\nconst StreamingsLazy = React.lazy(() => import(\"./Streamings\"));\r\n\r\n// ---- Helpers: orden y fechas ----\r\nconst SPECIAL_TAIL = new Set([\"bard\", \"paladin\", \"artist\", \"valkyrie\"]);\r\nconst isTailClass = (clsName) =>\r\n  typeof clsName === \"string\" && SPECIAL_TAIL.has(clsName.trim().toLowerCase());\r\n\r\nconst sortTeam = (arr = []) => {\r\n  const withIndex = arr.map((c, i) => ({ c, i }));\r\n  withIndex.sort((a, b) => {\r\n    const aIsTail = isTailClass(a.c?.class?.name);\r\n    const bIsTail = isTailClass(b.c?.class?.name);\r\n    if (aIsTail !== bIsTail) return aIsTail ? 1 : -1;\r\n    return a.i - b.i;\r\n  });\r\n  return withIndex.map((x) => x.c);\r\n};\r\n\r\nconst mmddRe = /^(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\r\nconst ymdRe = /^(\\d{4})-(0[1-9]|1[0-2])-(0[1-9]|[12]\\d|3[01])$/;\r\n\r\nconst formatDayMonth = (value) => {\r\n  if (!value) return \"Fecha no asignada\";\r\n  const s = String(value).trim();\r\n  if (mmddRe.test(s)) {\r\n    const [m, d] = s.split(\"-\");\r\n    return `${m.padStart(2, \"0\")}-${d.padStart(2, \"0\")}`;\r\n  }\r\n  const ymd = s.match(ymdRe);\r\n  if (ymd) {\r\n    const [, , m, d] = ymd;\r\n    return `${m}-${d}`;\r\n  }\r\n  const d = new Date(s);\r\n  if (!isNaN(d)) {\r\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(d.getDate()).padStart(2, \"0\");\r\n    return `${mm}-${dd}`;\r\n  }\r\n  return s;\r\n};\r\n\r\nconst dateKeyFromDate = (dateStr) => {\r\n  if (!dateStr) return Number.POSITIVE_INFINITY;\r\n  const s = String(dateStr).trim();\r\n  if (mmddRe.test(s)) {\r\n    const [m, d] = s.split(\"-\");\r\n    return parseInt(`${m}${d}`, 10);\r\n  }\r\n  const ymd = s.match(ymdRe);\r\n  if (ymd) {\r\n    const [, , m, d] = ymd;\r\n    return parseInt(`${m}${d}`, 10);\r\n  }\r\n  const d = new Date(s);\r\n  if (!isNaN(d)) {\r\n    const mm = String(d.getMonth() + 1).padStart(2, \"0\");\r\n    const dd = String(d.getDate()).padStart(2, \"0\");\r\n    return parseInt(`${mm}${dd}`, 10);\r\n  }\r\n  return Number.POSITIVE_INFINITY;\r\n};\r\n\r\nconst minutesFromTime = (timeStr) => {\r\n  if (!timeStr) return Number.POSITIVE_INFINITY;\r\n  const s = String(timeStr).trim();\r\n  let m = s.match(/^([01]?\\d|2[0-3]):([0-5]\\d)$/);\r\n  if (m) return parseInt(m[1], 10) * 60 + parseInt(m[2], 10);\r\n  m = s.match(/^(\\d{3,4})$/);\r\n  if (m) {\r\n    const raw = m[1];\r\n    const hh = parseInt(raw.length === 3 ? raw.slice(0, 1) : raw.slice(0, 2), 10);\r\n    const mm = parseInt(raw.length === 3 ? raw.slice(1) : raw.slice(2), 10);\r\n    if (hh >= 0 && hh <= 23 && mm >= 0 && mm <= 59) return hh * 60 + mm;\r\n  }\r\n  m = s.match(/^([01]?\\d|2[0-3])$/);\r\n  if (m) return parseInt(m[1], 10) * 60;\r\n  return Number.POSITIVE_INFINITY;\r\n};\r\n\r\nconst dateFromCard = (dateStr, timeStr) => {\r\n  if (!dateStr) return null;\r\n  const now = new Date();\r\n  let y = now.getFullYear(), m, d;\r\n  if (mmddRe.test(dateStr)) {\r\n    const [mm, dd] = dateStr.split(\"-\").map((x) => parseInt(x, 10));\r\n    m = mm; d = dd;\r\n  } else {\r\n    const ymd = dateStr.match(ymdRe);\r\n    if (ymd) {\r\n      y = parseInt(ymd[1], 10);\r\n      m = parseInt(ymd[2], 10);\r\n      d = parseInt(ymd[3], 10);\r\n    } else {\r\n      const free = new Date(dateStr);\r\n      if (isNaN(free)) return null;\r\n      y = free.getFullYear();\r\n      m = free.getMonth() + 1;\r\n      d = free.getDate();\r\n    }\r\n  }\r\n  let hh = 0, mm = 0;\r\n  if (typeof timeStr === \"string\" && timeStr.trim()) {\r\n    const s = timeStr.trim();\r\n    let m1 = s.match(/^([01]?\\d|2[0-3]):([0-5]\\d)$/);\r\n    if (m1) { hh = parseInt(m1[1], 10); mm = parseInt(m1[2], 10); }\r\n    else {\r\n      m1 = s.match(/^(\\d{3,4})$/);\r\n      if (m1) {\r\n        const raw = m1[1];\r\n        hh = parseInt(raw.length === 3 ? raw.slice(0, 1) : raw.slice(0, 2), 10);\r\n        mm = parseInt(raw.length === 3 ? raw.slice(1) : raw.slice(2), 10);\r\n      } else {\r\n        m1 = s.match(/^([01]?\\d|2[0-3])$/);\r\n        if (m1) hh = parseInt(m1[1], 10);\r\n      }\r\n    }\r\n  }\r\n  const dt = new Date(y, (m || 1) - 1, d || 1, hh, mm, 0, 0);\r\n  return isNaN(dt) ? null : dt;\r\n};\r\n\r\nconst getCardStatus = (card, nowTs) => {\r\n  const start = dateFromCard(card?.date, card?.time);\r\n  if (!start) return \"upcoming\";\r\n  const startTs = start.getTime();\r\n  const endTs = startTs + 60 * 60 * 1000;\r\n  if (nowTs >= endTs) return \"expired\";\r\n  if (nowTs >= startTs) return \"live\";\r\n  return \"upcoming\";\r\n};\r\n\r\n// ðŸš¨ Probe SIEMPRE montado (off-screen): detecta si hay al menos 1 LIVE\r\nfunction StreamsProbe({ onHasLiveChange }) {\r\n  return (\r\n    <React.Suspense fallback={null}>\r\n      <StreamingsLazy\r\n        pollIntervalMs={60000}\r\n        cardWidth={220}\r\n        probeEndpoint={\"http://localhost:3001/api/stream/live-status\"}\r\n        onLiveCountChange={(count) => onHasLiveChange?.(count > 0)}\r\n      />\r\n    </React.Suspense>\r\n  );\r\n}\r\n\r\nconst CharItem = React.memo(function CharItem({ char }) {\r\n  if (!char) return null;\r\n  return (\r\n    <div\r\n      style={{\r\n        padding: \"10px\",\r\n        borderRadius: \"10px\",\r\n        backgroundColor: \"#f8fafc\",\r\n        border: \"1px solid #e2e8f0\",\r\n        display: \"flex\",\r\n        flexDirection: \"column\",\r\n        alignItems: \"center\",\r\n        gap: 6,\r\n        textAlign: \"center\",\r\n        contentVisibility: \"auto\",\r\n        containIntrinsicSize: \"60px\",\r\n      }}\r\n      title={char.name}\r\n    >\r\n      {char.class?.image ? (\r\n        <img\r\n          src={char.class.image}\r\n          alt={char.class?.name || \"Clase\"}\r\n          width={32}\r\n          height={32}\r\n          style={{ width: 32, height: 32, borderRadius: 8, objectFit: \"cover\" }}\r\n          loading=\"lazy\"\r\n          decoding=\"async\"\r\n        />\r\n      ) : (\r\n        <div\r\n          aria-hidden\r\n          style={{\r\n            width: 32,\r\n            height: 32,\r\n            borderRadius: 8,\r\n            background: \"#e5e7eb\",\r\n            display: \"grid\",\r\n            placeItems: \"center\",\r\n            fontSize: 12,\r\n            color: \"#6b7280\",\r\n          }}\r\n        >\r\n          ?\r\n        </div>\r\n      )}\r\n\r\n      <div\r\n        style={{\r\n          fontWeight: 700,\r\n          fontSize: 13,\r\n          color: \"#0f172a\",\r\n          whiteSpace: \"nowrap\",\r\n          overflow: \"hidden\",\r\n          textOverflow: \"ellipsis\",\r\n          width: \"100%\",\r\n        }}\r\n      >\r\n        {char.name}\r\n      </div>\r\n    </div>\r\n  );\r\n});\r\n\r\n// ===================== AQUÃ el auto-refresh ======================\r\nexport default function HomePage({ cards = [], loading, error }) {\r\n  const API_BASE = \"http://localhost:3001\";\r\n  const [nowTs, setNowTs] = React.useState(() => Date.now());\r\n  const [hasLive, setHasLive] = React.useState(false);\r\n\r\n  // Estado local para datos auto-actualizables\r\n  const [dataCards, setDataCards] = React.useState(cards);\r\n  const [isLoading, setIsLoading] = React.useState(!!loading);\r\n  const [errMsg, setErrMsg] = React.useState(error || \"\");\r\n\r\n  // Si cambian las props externas, sincroniza una vez\r\n  React.useEffect(() => {\r\n    if (Array.isArray(cards) && cards.length) setDataCards(cards);\r\n    if (typeof loading === \"boolean\") setIsLoading(loading);\r\n    if (error) setErrMsg(error);\r\n  }, [cards, loading, error]);\r\n\r\n  // 1) â€œrelojâ€ local para estados live/expired\r\n  React.useEffect(() => {\r\n    const id = setInterval(() => setNowTs(Date.now()), 30_000);\r\n    return () => clearInterval(id);\r\n  }, []);\r\n\r\n  // 2) Polling de datos cada 30s SIN refrescar la pÃ¡gina\r\n  React.useEffect(() => {\r\n    let aborter = new AbortController();\r\n\r\n    const load = async (silent = false) => {\r\n      try {\r\n        if (!silent) setIsLoading(true);\r\n        const res = await fetch(`${API_BASE}/api/data`, { signal: aborter.signal });\r\n        if (!res.ok) throw new Error(`HTTP ${res.status}`);\r\n        const json = await res.json();\r\n        // server nuevo devuelve { cards } solamente\r\n        setDataCards(Array.isArray(json.cards) ? json.cards : []);\r\n        setErrMsg(\"\");\r\n      } catch (e) {\r\n        if (e.name !== \"AbortError\") setErrMsg(e.message || \"Error loading data\");\r\n      } finally {\r\n        setIsLoading(false);\r\n      }\r\n    };\r\n\r\n    // primera carga inmediata\r\n    load(false);\r\n\r\n    // intervalo 30s (carga silenciosa)\r\n    const id = setInterval(() => load(true), 30_000);\r\n\r\n    // pausar si la pestaÃ±a estÃ¡ oculta (opcional)\r\n    const onVis = () => {\r\n      if (document.visibilityState === \"visible\") {\r\n        // refresco rÃ¡pido al volver\r\n        load(true);\r\n      }\r\n    };\r\n    document.addEventListener(\"visibilitychange\", onVis);\r\n\r\n    // cleanup\r\n    return () => {\r\n      clearInterval(id);\r\n      document.removeEventListener(\"visibilitychange\", onVis);\r\n      aborter.abort();\r\n      aborter = null;\r\n    };\r\n  }, [API_BASE]);\r\n\r\n  // â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”\r\n\r\n  const sortedCards = React.useMemo(() => {\r\n    return [...dataCards].sort((a, b) => {\r\n      const da = dateKeyFromDate(a?.date);\r\n      const db = dateKeyFromDate(b?.date);\r\n      if (da !== db) return da - db;\r\n      const ta = minutesFromTime(a?.time);\r\n      const tb = minutesFromTime(b?.time);\r\n      if (ta !== tb) return ta - tb;\r\n      const at = (a?.title || \"\").toLowerCase();\r\n      const bt = (b?.title || \"\").toLowerCase();\r\n      if (at < bt) return -1;\r\n      if (at > bt) return 1;\r\n      return 0;\r\n    });\r\n  }, [dataCards]);\r\n\r\n  const visibleCards = React.useMemo(\r\n    () => sortedCards.filter((c) => getCardStatus(c, nowTs) !== \"expired\"),\r\n    [sortedCards, nowTs]\r\n  );\r\n\r\n  // Render\r\n  return (\r\n    <div\r\n      style={{\r\n        maxWidth: \"1480px\",\r\n        margin: \"20px auto\",\r\n        padding: \"20px\",\r\n        fontFamily: \"'Segoe UI', Tahoma, Geneva, Verdana, sans-serif\",\r\n        color: \"#34495e\",\r\n      }}\r\n    >\r\n      <style>{`\r\n        @keyframes whaleGlowPulse {\r\n          0% { box-shadow: 0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.45); }\r\n          50% { box-shadow: 0 0 0 6px rgba(30,136,229,0.12), 0 0 36px rgba(30,136,229,0.65); }\r\n          100% { box-shadow: 0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.45); }\r\n        }\r\n        .whale-glow { animation: whaleGlowPulse 1.6s ease-in-out infinite; border-radius: 14px; }\r\n\r\n        .wc-sections {\r\n          display: grid;\r\n          grid-template-columns: minmax(0, 1fr) 360px;\r\n          gap: 24px;\r\n          align-items: start;\r\n        }\r\n        @media (max-width: 1100px) {\r\n          .wc-sections { grid-template-columns: 1fr; }\r\n        }\r\n        .wc-left { content-visibility: auto; contain-intrinsic-size: 600px; }\r\n        .wc-right { content-visibility: auto; contain-intrinsic-size: 400px; }\r\n      `}</style>\r\n\r\n      {/* Welcome */}\r\n      <section\r\n        aria-labelledby=\"welcome-title\"\r\n        style={{\r\n          textAlign: \"center\",\r\n          marginBottom: \"28px\",\r\n          padding: \"20px\",\r\n          backgroundColor: \"transparent\",\r\n          borderRadius: \"10px\",\r\n        }}\r\n      >\r\n        <h1 id=\"welcome-title\" style={{ color: \"#5A2D82\", fontWeight: 700, margin: 0 }}>\r\n          Whalecome to WhaleCorp\r\n        </h1>\r\n      </section>\r\n\r\n      {/* Estados */}\r\n      {isLoading ? (\r\n        <section style={{ textAlign: \"center\", margin: \"50px 0\" }}>\r\n          <div className=\"spinner\" />\r\n          <p style={{ color: \"#95a5a6\", fontSize: 16 }}>Loading Characters...</p>\r\n        </section>\r\n      ) : errMsg ? (\r\n        <section style={{ textAlign: \"center\", margin: \"50px 0\", color: \"#e74c3c\" }}>\r\n          <p>Error loading data: {errMsg}</p>\r\n          <button\r\n            onClick={() => window.location.reload()}\r\n            style={{\r\n              padding: \"10px 20px\",\r\n              background: \"#1e88e5\",\r\n              color: \"white\",\r\n              border: \"none\",\r\n              borderRadius: 6,\r\n              cursor: \"pointer\",\r\n              fontWeight: 600,\r\n              fontSize: 16,\r\n              marginTop: 15,\r\n              boxShadow: \"0 2px 6px rgba(30,136,229,0.4)\",\r\n            }}\r\n            onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#1565c0\")}\r\n            onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#1e88e5\")}\r\n          >\r\n            Retry\r\n          </button>\r\n        </section>\r\n      ) : visibleCards.length === 0 ? (\r\n        <section style={{ textAlign: \"center\", margin: \"50px 0\", color: \"#7f8c8d\", fontSize: 18 }}>\r\n          <p>No cards available</p>\r\n          <Link\r\n            to=\"/login\"\r\n            style={{\r\n              display: \"inline-block\",\r\n              marginTop: 20,\r\n              padding: \"10px 25px\",\r\n              background: \"#1e88e5\",\r\n              color: \"white\",\r\n              textDecoration: \"none\",\r\n              borderRadius: 8,\r\n              fontWeight: 600,\r\n              boxShadow: \"0 2px 6px rgba(30,136,229,0.4)\",\r\n            }}\r\n            onMouseOver={(e) => (e.currentTarget.style.backgroundColor = \"#1565c0\")}\r\n            onMouseOut={(e) => (e.currentTarget.style.backgroundColor = \"#1e88e5\")}\r\n          >\r\n            Log in as Admin\r\n          </Link>\r\n        </section>\r\n      ) : (\r\n        <section className=\"wc-sections\" aria-label=\"contenido principal\">\r\n          {/* LEFT */}\r\n          <section aria-labelledby=\"raids-title\" className=\"wc-left\">\r\n            <h2\r\n              id=\"raids-title\"\r\n              style={{\r\n                textAlign: \"center\",\r\n                marginBottom: \"24px\",\r\n                color: \"#7A5DC7\",\r\n                fontWeight: 700,\r\n                letterSpacing: \"1px\",\r\n              }}\r\n            >\r\n              <b>Pending Raids</b>\r\n            </h2>\r\n\r\n            <div\r\n              style={{\r\n                display: \"grid\",\r\n                gridTemplateColumns: \"repeat(3, 1fr)\",\r\n                gap: \"24px\",\r\n              }}\r\n            >\r\n              {visibleCards.map((card, index) => {\r\n                const status = getCardStatus(card, nowTs);\r\n                const isLive = status === \"live\";\r\n\r\n                const team1Raw = Array.isArray(card.team1)\r\n                  ? card.team1\r\n                  : Array.isArray(card.characters)\r\n                  ? card.characters.slice(0, 4)\r\n                  : [];\r\n                const team2Raw = Array.isArray(card.team2)\r\n                  ? card.team2\r\n                  : Array.isArray(card.characters)\r\n                  ? card.characters.slice(4, 8)\r\n                  : [];\r\n\r\n                const team1 = sortTeam(team1Raw).slice(0, 4);\r\n                const team2 = sortTeam(team2Raw).slice(0, 4);\r\n                const hasAny = team1.length + team2.length > 0;\r\n\r\n                return (\r\n                  <div\r\n                    key={index}\r\n                    className={isLive ? \"whale-glow\" : undefined}\r\n                    style={{\r\n                      borderRadius: 14,\r\n                      overflow: \"hidden\",\r\n                      boxShadow: isLive\r\n                        ? \"0 0 0 0 rgba(30,136,229,0.35), 0 0 24px rgba(30,136,229,0.55)\"\r\n                        : \"0 10px 20px rgba(0,0,0,0.08)\",\r\n                      backgroundColor: \"#fff\",\r\n                      display: \"flex\",\r\n                      flexDirection: \"column\",\r\n                      transition: \"transform 0.25s ease, box-shadow 0.25s ease\",\r\n                    }}\r\n                    onMouseEnter={(e) => {\r\n                      if (!isLive) {\r\n                        e.currentTarget.style.transform = \"translateY(-6px)\";\r\n                        e.currentTarget.style.boxShadow =\r\n                          \"0 20px 40px rgba(0,0,0,0.12)\";\r\n                      }\r\n                    }}\r\n                    onMouseLeave={(e) => {\r\n                      if (!isLive) {\r\n                        e.currentTarget.style.transform = \"translateY(0)\";\r\n                        e.currentTarget.style.boxShadow =\r\n                          \"0 10px 20px rgba(0,0,0,0.08)\";\r\n                      }\r\n                    }}\r\n                  >\r\n                    {/* Header */}\r\n                    <div\r\n                      style={{\r\n                        padding: \"18px 22px\",\r\n                        backgroundColor: \"#e3f2fd\",\r\n                        borderBottom: \"1px solid #bbdefb\",\r\n                        userSelect: \"none\",\r\n                      }}\r\n                    >\r\n                      <h3\r\n                        style={{\r\n                          margin: 0,\r\n                          color: \"#7A5DC7\",\r\n                          fontWeight: 700,\r\n                          fontSize: \"1.3rem\",\r\n                          lineHeight: 1.15,\r\n                          textOverflow: \"ellipsis\",\r\n                          whiteSpace: \"nowrap\",\r\n                          overflow: \"hidden\",\r\n                        }}\r\n                        title={card.title}\r\n                      >\r\n                        {card.title}\r\n                      </h3>\r\n                      <div\r\n                        style={{\r\n                          display: \"flex\",\r\n                          justifyContent: \"space-between\",\r\n                          fontSize: 14,\r\n                          color: \"#607d8b\",\r\n                          marginTop: 6,\r\n                          fontWeight: 600,\r\n                        }}\r\n                      >\r\n                        <span>\r\n                          {card.date ? formatDayMonth(card.date) : \"Fecha no asignada\"}\r\n                        </span>\r\n                        <span>{card.time || \"Hora no asignada\"}</span>\r\n                      </div>\r\n                    </div>\r\n\r\n                    {/* Body */}\r\n                    <div\r\n                      style={{\r\n                        padding: \"18px 22px\",\r\n                        display: \"grid\",\r\n                        gridTemplateColumns: \"1fr 1fr\",\r\n                        gap: 16,\r\n                      }}\r\n                    >\r\n                      {!hasAny ? (\r\n                        <p\r\n                          style={{\r\n                            color: \"#7A5DC7\",\r\n                            textAlign: \"center\",\r\n                            padding: \"30px 0\",\r\n                            gridColumn: \"1 / -1\",\r\n                            fontWeight: 500,\r\n                            fontStyle: \"italic\",\r\n                            margin: 0,\r\n                          }}\r\n                        >\r\n                          Card pending assignment\r\n                        </p>\r\n                      ) : (\r\n                        <>\r\n                          <div>\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\",\r\n                                marginBottom: 8,\r\n                              }}\r\n                            >\r\n                              <strong style={{ color: \"#0d47a1\" }}>Party 1</strong>\r\n                              <span style={{ fontSize: 12, color: \"#64748b\" }}>\r\n                                {team1.length}/4\r\n                              </span>\r\n                            </div>\r\n                            <div\r\n                              style={{\r\n                                display: \"grid\",\r\n                                gridTemplateRows: \"repeat(4, minmax(0, auto))\",\r\n                                gap: 10,\r\n                              }}\r\n                            >\r\n                              {team1.map((char, i) => (\r\n                                <CharItem key={`t1-${i}-${char?.name || i}`} char={char} />\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n\r\n                          <div>\r\n                            <div\r\n                              style={{\r\n                                display: \"flex\",\r\n                                justifyContent: \"space-between\",\r\n                                alignItems: \"center\",\r\n                                marginBottom: 8,\r\n                              }}\r\n                            >\r\n                              <strong style={{ color: \"#0d47a1\" }}>Party 2</strong>\r\n                              <span style={{ fontSize: 12, color: \"#64748b\" }}>\r\n                                {team2.length}/4\r\n                              </span>\r\n                            </div>\r\n                            <div\r\n                              style={{\r\n                                display: \"grid\",\r\n                                gridTemplateRows: \"repeat(4, minmax(0, auto))\",\r\n                                gap: 10,\r\n                              }}\r\n                            >\r\n                              {team2.map((char, i) => (\r\n                                <CharItem key={`t2-${i}-${char?.name || i}`} char={char} />\r\n                              ))}\r\n                            </div>\r\n                          </div>\r\n                        </>\r\n                      )}\r\n                    </div>\r\n                  </div>\r\n                );\r\n              })}\r\n            </div>\r\n          </section>\r\n\r\n          {/* RIGHT: Live Streamings */}\r\n          <section aria-labelledby=\"streams-title\" className=\"wc-right\" style={{ justifySelf: \"end\" }}>\r\n            <h2\r\n              id=\"streams-title\"\r\n              style={{\r\n                color: \"#7A5DC7\",\r\n                fontWeight: 700,\r\n                letterSpacing: \"0.5px\",\r\n                margin: \"0 0 12px\",\r\n                textAlign: \"right\",\r\n              }}\r\n            >\r\n              Live Streamings\r\n            </h2>\r\n\r\n            {/* Probe off-screen */}\r\n            <div style={{ position: \"absolute\", left: -99999, width: 1, height: 1, overflow: \"hidden\" }}>\r\n              <StreamsProbe onHasLiveChange={setHasLive} />\r\n            </div>\r\n\r\n            {hasLive && (\r\n              <div\r\n                style={{\r\n                  borderRadius: 10,\r\n                  padding: 12,\r\n                  background: \"#transparent\",\r\n                  width: 360,\r\n                }}\r\n              >\r\n                <React.Suspense fallback={null}>\r\n                  <StreamingsLazy\r\n                    pollIntervalMs={60000}\r\n                    cardWidth={220}\r\n                    probeEndpoint={\"http://localhost:3001/api/stream/live-status\"}\r\n                    onLiveCountChange={(count) => setHasLive(count > 0)}\r\n                  />\r\n                </React.Suspense>\r\n              </div>\r\n            )}\r\n          </section>\r\n        </section>\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}