{"ast":null,"code":"var _jsxFileName = \"E:\\\\Visual Studio Code\\\\WhaleCorpProject\\\\frontend\\\\src\\\\App.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from \"react\";\nimport { fetchUsersData, saveUserData } from \"./api/backendApi\";\nimport LoginForm from \"./components/LoginForm\";\nimport UserProfile from \"./components/UserProfile\";\nimport Header from \"./components/Header\";\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nfunction App() {\n  _s();\n  const [userEmail, setUserEmail] = useState(null);\n\n  // Estado completo con password, characters y labels\n  const [userData, setUserData] = useState({\n    password: \"\",\n    characters: [],\n    labels: []\n  });\n\n  // Contiene todos los usuarios con sus datos\n  const [allUsersData, setAllUsersData] = useState({});\n\n  // Carga todos los usuarios desde backend/GAS al iniciar la app\n  useEffect(() => {\n    fetchUsersData().then(data => setAllUsersData(data)).catch(console.error);\n  }, []);\n\n  // Guarda userData completo SOLO si hay un usuario logueado\n  useEffect(() => {\n    if (userEmail && userData) {\n      saveUserData(userEmail, userData).catch(console.error);\n    }\n  }, [userData, userEmail]);\n\n  // Maneja login y registro\n  const handleLogin = async (email, password, mode) => {\n    const existingUser = allUsersData[email];\n    if (mode === \"register\") {\n      if (existingUser) throw new Error(\"Usuario ya registrado\");\n      const newUser = {\n        password,\n        characters: [],\n        labels: []\n      };\n      setUserEmail(email);\n      setUserData(newUser);\n      setAllUsersData(prev => ({\n        ...prev,\n        [email]: newUser\n      }));\n    } else {\n      if (!existingUser || existingUser.password !== password) throw new Error(\"Credenciales inválidas\");\n      setUserEmail(email);\n      // Carga todo el objeto completo con password, characters y labels\n      setUserData(existingUser);\n    }\n  };\n\n  // Cierra sesión sin borrar userData para evitar borrar datos en backend\n  const handleLogout = () => {\n    setUserEmail(null);\n    // No borrar userData aquí\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(Header, {\n      userEmail: userEmail,\n      onLogout: handleLogout\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 55,\n      columnNumber: 7\n    }, this), userEmail ? /*#__PURE__*/_jsxDEV(UserProfile, {\n      userEmail: userEmail,\n      userData: userData,\n      setUserData: setUserData\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 57,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(LoginForm, {\n      onLogin: handleLogin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 59,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true);\n}\n_s(App, \"GmoYrj3aZWmmgOhz4YgNGv8WIJ4=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","fetchUsersData","saveUserData","LoginForm","UserProfile","Header","jsxDEV","_jsxDEV","Fragment","_Fragment","App","_s","userEmail","setUserEmail","userData","setUserData","password","characters","labels","allUsersData","setAllUsersData","then","data","catch","console","error","handleLogin","email","mode","existingUser","Error","newUser","prev","handleLogout","children","onLogout","fileName","_jsxFileName","lineNumber","columnNumber","onLogin","_c","$RefreshReg$"],"sources":["E:/Visual Studio Code/WhaleCorpProject/frontend/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { fetchUsersData, saveUserData } from \"./api/backendApi\";\nimport LoginForm from \"./components/LoginForm\";\nimport UserProfile from \"./components/UserProfile\";\nimport Header from \"./components/Header\";\n\nfunction App() {\n  const [userEmail, setUserEmail] = useState(null);\n\n  // Estado completo con password, characters y labels\n  const [userData, setUserData] = useState({ password: \"\", characters: [], labels: [] });\n\n  // Contiene todos los usuarios con sus datos\n  const [allUsersData, setAllUsersData] = useState({});\n\n  // Carga todos los usuarios desde backend/GAS al iniciar la app\n  useEffect(() => {\n    fetchUsersData()\n      .then((data) => setAllUsersData(data))\n      .catch(console.error);\n  }, []);\n\n  // Guarda userData completo SOLO si hay un usuario logueado\n  useEffect(() => {\n    if (userEmail && userData) {\n      saveUserData(userEmail, userData).catch(console.error);\n    }\n  }, [userData, userEmail]);\n\n  // Maneja login y registro\n  const handleLogin = async (email, password, mode) => {\n    const existingUser = allUsersData[email];\n    if (mode === \"register\") {\n      if (existingUser) throw new Error(\"Usuario ya registrado\");\n      const newUser = { password, characters: [], labels: [] };\n      setUserEmail(email);\n      setUserData(newUser);\n      setAllUsersData((prev) => ({ ...prev, [email]: newUser }));\n    } else {\n      if (!existingUser || existingUser.password !== password) throw new Error(\"Credenciales inválidas\");\n      setUserEmail(email);\n      // Carga todo el objeto completo con password, characters y labels\n      setUserData(existingUser);\n    }\n  };\n\n  // Cierra sesión sin borrar userData para evitar borrar datos en backend\n  const handleLogout = () => {\n    setUserEmail(null);\n    // No borrar userData aquí\n  };\n\n  return (\n    <>\n      <Header userEmail={userEmail} onLogout={handleLogout} />\n      {userEmail ? (\n        <UserProfile userEmail={userEmail} userData={userData} setUserData={setUserData} />\n      ) : (\n        <LoginForm onLogin={handleLogin} />\n      )}\n    </>\n  );\n}\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}