"use strict";(self.webpackChunkwhalecorp_frontend=self.webpackChunkwhalecorp_frontend||[]).push([[960],{960:(t,e,n)=>{n.r(e),n.d(e,{default:()=>r});var i=n(379),a=n(43),l=n(579);const o=["https://www.twitch.tv/trickmasteh","https://www.twitch.tv/blawbberto","https://www.twitch.tv/kaosniight","https://www.twitch.tv/khangsoofly","https://www.twitch.tv/faaaxy","https://www.twitch.tv/takeshijoga"];function r(t){let{channels:e=o,pollIntervalMs:n=12e4,maxCards:r=12,cardWidth:s=220,probeEndpoint:d="/api/stream/live-status"}=t;const[h,u]=(0,a.useState)([]),[p,w]=(0,a.useState)(!0),v=(0,a.useRef)(null);(0,a.useEffect)(()=>{const t=t=>{const e=document.createElement("link");return e.rel="preconnect",e.href=t,e.crossOrigin="",document.head.appendChild(e),e},e=t("https://static-cdn.jtvnw.net"),n=t("https://www.twitch.tv");return()=>{e.remove(),n.remove()}},[]);const f=(0,a.useMemo)(()=>(e||[]).map(t=>{if(!t)return null;const e=String(t).trim();try{if(e.startsWith("http")){var n;const t=new URL(e);return(null===(n=t.pathname.split("/").filter(Boolean)[0])||void 0===n?void 0:n.toLowerCase())||null}}catch(i){}return e.replace(/^@/,"").replace(/\s+/g,"").toLowerCase()}).filter(Boolean).slice(0,r),[e,r]),m=async t=>{if(!f.length)return u([]),void w(!1);w(!0);const e=await Promise.allSettled(f.map(e=>{return fetch((n=e,"".concat(d,"?channel=").concat(encodeURIComponent(n))),{cache:"no-store",signal:t});var n})),n=(await Promise.all(e.map(t=>"fulfilled"===t.status?t.value.json().catch(()=>null):null))||[]).filter(t=>t&&t.live).map(t=>({channel:t.channel,thumbUrl:"https://static-cdn.jtvnw.net/previews-ttv/live_user_".concat(encodeURIComponent(t.channel),"-320x180.jpg?cb=").concat(Date.now()),w:320,h:180}));u(n),w(!1)};(0,a.useEffect)(()=>{const t=new AbortController,e=(window.requestIdleCallback||function(t){return setTimeout(t,500)})(()=>{"visible"===document.visibilityState&&m(t.signal)});v.current=setInterval(()=>{"visible"===document.visibilityState&&m(t.signal)},n);const i=()=>"visible"===document.visibilityState&&m(t.signal);return document.addEventListener("visibilitychange",i),()=>{window.cancelIdleCallback?window.cancelIdleCallback(e):clearTimeout(e),clearInterval(v.current),document.removeEventListener("visibilitychange",i),t.abort()}},[f,n]);const b=Math.round(9*s/16);return(0,l.jsx)("div",{"aria-label":"Listado de streamings en vivo",style:{display:"flex",flexDirection:"column",gap:12,alignItems:"flex-end"},children:p&&0===h.length?(0,l.jsx)("div",{style:(0,i.A)((0,i.A)({},c.skeletonBox),{},{width:s,height:b}),children:(0,l.jsx)("div",{style:c.livePillMuted,children:"Buscando LIVE\u2026"})}):h.map(t=>(0,l.jsx)("a",{href:"https://www.twitch.tv/".concat(encodeURIComponent(t.channel)),target:"_blank",rel:"noopener noreferrer",style:{textDecoration:"none"},children:(0,l.jsxs)("div",{style:(0,i.A)((0,i.A)({},c.card),{},{width:s,contentVisibility:"auto",containIntrinsicSize:"".concat(b+48,"px"),marginLeft:"auto"}),children:[(0,l.jsx)("div",{style:c.livePill,children:"LIVE"}),(0,l.jsx)("img",{src:t.thumbUrl,srcSet:"".concat(t.thumbUrl," ").concat(t.w,"w"),sizes:"".concat(s,"px"),alt:"".concat(t.channel," en vivo"),width:s,height:b,loading:"lazy",decoding:"async",fetchpriority:"low",style:{width:"100%",height:b,objectFit:"cover",display:"block",background:"#555"}}),(0,l.jsxs)("div",{style:c.meta,children:[(0,l.jsx)("div",{style:c.streamTitle,children:t.channel}),(0,l.jsx)("div",{style:c.streamSub,children:"Click para abrir en Twitch"})]})]})},t.channel))})}const c={card:{position:"relative",border:"3px solid #000",borderRadius:10,background:"#f7f9fc",overflow:"hidden"},skeletonBox:{border:"3px solid #000",borderRadius:10,background:"#f7f9fc",display:"flex",alignItems:"flex-start",marginLeft:"auto"},livePill:{position:"absolute",top:8,left:8,background:"#ff3b30",color:"#fff",fontSize:12,padding:"2px 8px",borderRadius:999,fontWeight:700,letterSpacing:.5,zIndex:2},livePillMuted:{margin:8,background:"#e0e0e0",color:"#555",fontSize:12,padding:"2px 8px",borderRadius:999,fontWeight:600,letterSpacing:.5},meta:{padding:"8px 10px 10px"},streamTitle:{fontWeight:700,color:"#1e2a38",marginBottom:2,textTransform:"capitalize",fontSize:14},streamSub:{fontSize:11,color:"#66788a"}}}}]);
//# sourceMappingURL=960.d04061d9.chunk.js.map